(()=>{"use strict";var e={218:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(81),s=n.n(i),r=n(645),o=n.n(r)()(s());o.push([e.id,".comeBackContainer{\n  display: flex;\n  justify-content: center;\n}\n\n.comeBackContainer a {\n  color:antiquewhite;\n  font-size: x-large;\n}",""]);const a=o},642:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(81),s=n.n(i),r=n(645),o=n.n(r)()(s());o.push([e.id,'.login-page {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n  width: 100%;\n  height: 100%;\n\n  .go-to-registration--link {\n    color: #4CAF50;\n  }\n\n  .title {\n    font-size: 34px;\n    font-weight: 700;\n    line-height: 2;\n    color: #4CAF50;\n    margin-bottom: 15px;\n  }\n\n  .form__field {\n    margin-bottom: 9px;\n  }\n\n  .form__input {\n    display: block;\n    width: 250px;\n    height: 34px;\n    padding-left: 10px;\n    font-size: 14px;\n    letter-spacing: 0.15px;\n    border: none;\n    outline: none;\n    font-family: "Montserrat", sans-serif;\n    background-color: #d5f0d4;\n    transition: 0.25s ease;\n    border-radius: 8px;\n    box-shadow: inset 2px 2px 4px #d1d9e6, inset -2px -2px 4px #f9f9f9;\n  }\n\n  #password__input {\n    padding-right: 35px;\n  }\n\n  .form__label {\n    width: 250px;\n    display: block;\n    /* padding: 5px 14px 5px;\n    margin: 0 3px 15px ; */\n    margin-bottom: 3px;\n    font-family: "Montserrat", sans-serif;\n    font-size: 15px;\n    opacity: 0.9;\n    border-radius: 0 0 8px 8px;\n    transition: all 0.4s ease;\n  }\n\n  .validity__block {\n    font-size: 15px;\n    height: 20px;\n    width: 250px;\n    margin-top: 3px;\n    word-wrap: break-word;\n  }\n  \n  .form__button {\n    display: block;\n    width: 130px;\n    height: 35px;\n    border-radius: 8px;\n    margin: 30px auto;\n    font-weight: 700;\n    font-size: 14px;\n    letter-spacing: 1.15px;\n    background-color: #266128;\n    color: #daffaa;\n    box-shadow: 4px 4px 10px #b2cd90, -4px -4px 10px #b2cd90;\n    border: none;\n    outline: none;\n    cursor: pointer;\n  }\n\n  .wrong__input {\n    color: rgb(224, 68, 68);\n  }\n\n  .form__field {\n    position: relative;\n  }\n\n  .switch-visibility__btn {\n    height: 20px;\n    width: 20px;\n    top: 30px;\n    right: 10px;\n    position: absolute;\n    background-color: inherit;\n    border: none;\n    cursor: pointer;\n  }\n}\n\n',""]);const a=o},147:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(81),s=n.n(i),r=n(645),o=n.n(r)()(s());o.push([e.id,".winner-table {\n  width: 100%; /* Ширина таблицы */  \n  max-width: 700px;  \n  border-collapse: collapse; /* Слияние границ ячеек */\n  font-family: Arial, sans-serif; /* Шрифт таблицы */\n}\n\n.winner-table th, .winner-table td {\nborder: 1px solid #1ad1c2; /* Границы ячеек */\npadding: 8px; /* Отступ внутри ячеек */\n}",""]);const a=o},49:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(81),s=n.n(i),r=n(645),o=n.n(r)()(s());o.push([e.id,'.registration-page {\n  display: flex;\n  align-items: center;\n  flex-direction: column;\n  font-size: 16px;\n\n  .title {\n    font-size: 34px;\n    font-weight: 700;\n    line-height: 2;\n    color: #4CAF50;\n  }\n\n  .go-to-login-link {\n    color: #4CAF50;\n  }\n\n  .reg__form {\n    display: grid;\n    width: 420px;\n    grid-template-columns: 1fr 1fr;\n    column-gap: 16px;\n    row-gap: 9px;\n  }\n\n  @media (max-width: 480px) {\n    .reg__form {\n      width: 85vw;\n    }\n  }\n\n  .name__field,\n  .last-name__field,\n  .email__field,\n  .password__field,\n  .street__field,\n  .form__button,\n  .field-group__header,\n  .bill-street__field,\n  .postal__field,\n  .toggle__label[for="bill__toggle"]\n  {\n    grid-column: span 2;\n  }\n\n  .postal__field {\n    width: calc(50% - 8px);\n  }\n\n  .field-group__header {\n    font-size: 1rem;\n    color: #4CAF50;\n    text-align: center;\n  }\n\n  .form__input {\n    width: 100%;\n    height: 35px;\n    padding-left: 10px;\n    /* font-size: 18px; */\n    letter-spacing: 0.15px;\n    border: none;\n    outline: none;\n    font-family: "Montserrat", sans-serif;\n    background-color: #d5f0d4;\n    transition: 0.25s ease;\n    border-radius: 8px;\n    box-shadow: inset 2px 2px 4px #d1d9e6, inset -2px -2px 4px #f9f9f9;\n  }\n\n  .form__label {\n    display: block;\n    margin-bottom: 3px;\n    font-family: "Montserrat", sans-serif;\n    /* font-size: 15px; */\n    opacity: 0.9;\n    border-radius: 0 0 8px 8px;\n    transition: all 0.4s ease;\n  }\n\n  .validity__block {\n    /* font-size: 15px; */\n    height: 20px;\n    margin-top: 3px;\n  }\n\n  .form__toggle {\n    accent-color: #4CAF50;\n    margin-right: 10px;\n    width: 16px;\n    height: 16px;\n    position: relative;\n    top: 2px;\n  }\n\n  .toggle__label {\n    opacity: 0.9;\n    margin-bottom: 20px;\n  }\n  \n  .form__button {\n    display: block;\n    width: 130px;\n    height: 35px;\n    border-radius: 8px;\n    margin: 25px auto;\n    font-weight: 700;\n    font-size: 14px;\n    letter-spacing: 1.15px;\n    background-color: #266128;\n    color: #daffaa;\n    box-shadow: 4px 4px 10px #b2cd90, -4px -4px 10px #b2cd90;\n    border: none;\n    outline: none;\n  }\n\n  #birth-date__input {\n    padding-right: 8px;\n  }\n\n  .wrong__input {\n    color: rgb(224, 68, 68);\n  }\n\n  .form__field {\n    position: relative;\n  }\n\n  .switch-visibility__btn {\n    height: 20px;\n    width: 20px;\n    top: 30px;\n    right: 10px;\n    position: absolute;\n    background-color: inherit;\n    border: none;\n    cursor: pointer;\n  }\n\n  .hidden {\n    display: none;\n  }\n}\n',""]);const a=o},767:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(81),s=n.n(i),r=n(645),o=n.n(r)()(s());o.push([e.id,"*,\n*::after,\n*::before {\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n}\n\nbody {\n  color: #fff;\n  background: #17181c;\n  font-family: sans-serif;\n}\n\nheader {\n  /* padding: 0px 0px; */\n  padding-bottom: 10px;\n}\n\n.header div {\n  display: flex;\n  justify-content: space-evenly;\n}\n\n.header a {\n  color: #4caf50;\n}\n\nheader h1 {\n  font-size: 40px;\n  font-weight: 800;\n  margin-block-start: 0em;\n  margin-block-end: 0em;\n}\n\n.notification {\n  position: fixed;\n  bottom: 20px;\n  left: 50%;\n  transform: translateX(-50%);\n  padding: 10px;\n  background-color: #0a0a0a;\n  border: 1px solid #ddd;\n  border-radius: 4px;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);\n  z-index: 9999;\n}\n\n.notificationTop {\n  position: fixed;\n  bottom: 100px;\n  left: 50%;\n  transform: translateX(-50%);\n  padding: 10px;\n  background-color: #0a0a0a;\n  border: 1px solid #ddd;\n  border-radius: 4px;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);\n  z-index: 9999;\n}\n\n#current-page {\n  animation: comeIn 1.5s ease-in-out;\n}\n\n#dissapear {\n  animation: comeOut 1.5s ease-in-out;\n}\n\n@keyframes comeIn {\n  0% {\n    transform: translateY(-150%);\n  }\n\n  45% {\n    transform: translateY(4%);\n  }\n\n  80% {\n    transform: translateY(-2%);\n  }\n\n  100% {\n    transform: translateY(0%);\n  }\n}\n\n@keyframes comeOut {\n  0% {\n    transform: translateY(0%);\n  }\n\n  33% {\n    transform: translateY(10%);\n  }\n\n  100% {\n    transform: translateY(-150%);\n  }\n}\n\n",""]);const a=o},645:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",i=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),i&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),i&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,i,s,r){"string"==typeof e&&(e=[[null,e,void 0]]);var o={};if(i)for(var a=0;a<this.length;a++){var c=this[a][0];null!=c&&(o[c]=!0)}for(var l=0;l<e.length;l++){var d=[].concat(e[l]);i&&o[d[0]]||(void 0!==r&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=r),n&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=n):d[2]=n),s&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=s):d[4]="".concat(s)),t.push(d))}},t}},81:e=>{e.exports=function(e){return e[1]}},379:e=>{var t=[];function n(e){for(var n=-1,i=0;i<t.length;i++)if(t[i].identifier===e){n=i;break}return n}function i(e,i){for(var r={},o=[],a=0;a<e.length;a++){var c=e[a],l=i.base?c[0]+i.base:c[0],d=r[l]||0,p="".concat(l," ").concat(d);r[l]=d+1;var u=n(p),h={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==u)t[u].references++,t[u].updater(h);else{var m=s(h,i);i.byIndex=a,t.splice(a,0,{identifier:p,updater:m,references:1})}o.push(p)}return o}function s(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,s){var r=i(e=e||[],s=s||{});return function(e){e=e||[];for(var o=0;o<r.length;o++){var a=n(r[o]);t[a].references--}for(var c=i(e,s),l=0;l<r.length;l++){var d=n(r[l]);0===t[d].references&&(t[d].updater(),t.splice(d,1))}r=c}}},569:e=>{var t={};e.exports=function(e,n){var i=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(n)}},216:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},565:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},795:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var i="";n.supports&&(i+="@supports (".concat(n.supports,") {")),n.media&&(i+="@media ".concat(n.media," {"));var s=void 0!==n.layer;s&&(i+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),i+=n.css,s&&(i+="}"),n.media&&(i+="}"),n.supports&&(i+="}");var r=n.sourceMap;r&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),t.styleTagTransform(i,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},589:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}}},t={};function n(i){var s=t[i];if(void 0!==s)return s.exports;var r=t[i]={id:i,exports:{}};return e[i](r,r.exports,n),r.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.nc=void 0,(()=>{var e=n(379),t=n.n(e),i=n(795),s=n.n(i),r=n(569),o=n.n(r),a=n(565),c=n.n(a),l=n(216),d=n.n(l),p=n(589),u=n.n(p),h=n(147),m={};m.styleTagTransform=u(),m.setAttributes=c(),m.insert=o().bind(null,"head"),m.domAPI=s(),m.insertStyleElement=d(),t()(h.Z,m),h.Z&&h.Z.locals&&h.Z.locals;class g{constructor(e){this.container=document.createElement("div"),this.container.id=e}createHeaderTitle(e){const t=document.createElement("h1");return t.classList.add("title"),t.innerText=e,t}render(){return this.container}}g.TextObject={};const f=g;class _ extends f{constructor(e){super(e)}render(){const e=this.createHeaderTitle(_.TextObject.MainTitle);return this.container.append(e),this.container}}_.TextObject={MainTitle:"Main page 123"};const b=_;var w=n(642),y={};y.styleTagTransform=u(),y.setAttributes=c(),y.insert=o().bind(null,"head"),y.domAPI=s(),y.insertStyleElement=d(),t()(w.Z,y),w.Z&&w.Z.locals&&w.Z.locals;var x=function(e,t,n,i){return new(n||(n=Promise))((function(s,r){function o(e){try{c(i.next(e))}catch(e){r(e)}}function a(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((i=i.apply(e,t||[])).next())}))};const v=class{constructor(){this.bathUrl="",this.authUrl="",this.apiUrl="",this.projectKey="",this.secret="",this.scope="",this.clientCredentialsFlow=()=>{const e={grant_type:"client_credentials",scope:`manage_project:${this.projectKey}`},t={method:"POST",headers:{Authorization:"Basic "+btoa(`${this.secret}:${this.scope}`),"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(e)};return fetch(`${this.authUrl}/oauth/token`,t).then((e=>e.json())).then((e=>(console.log("clientCredentialsFlow = ",e),e))).catch((e=>(console.error(e),Promise.reject({access_token:"",expires_in:0,scope:"",token_type:""}))))},this.passwordFlow=(e,t)=>new Promise(((n,i)=>{const s={grant_type:"password",username:e,password:t,scope:`manage_project:${this.projectKey}`},r={method:"POST",headers:{Authorization:"Basic "+btoa(`${this.secret}:${this.scope}`),"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(s)};fetch(`${this.authUrl}/oauth/${this.projectKey}/customers/token`,r).then((e=>e.json())).then((e=>{n(e)})).catch((e=>i(e)))})),this.getCustomer=(e,t)=>{const n={method:"GET",headers:{Authorization:`Bearer ${t}`}};return fetch(`${this.apiUrl}/${this.projectKey}/customers/${e}`,n).then((e=>e.json())).then((e=>(console.log("getCustomer = ",e),e))).catch((e=>console.error(e)))},this.getAllCustomers=e=>{const t={method:"GET",headers:{Authorization:`Bearer ${e}`}};return fetch(`${this.apiUrl}/${this.projectKey}/customers/`,t).then((e=>e.json())).then((e=>(console.log("getAllCustomers = ",e),e))).catch((e=>console.error(e)))},this.createCustomer=(e,t)=>{const n={method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify(t)};return fetch(`${this.apiUrl}/${this.projectKey}/customers`,n).then((e=>e.json())).then((e=>(console.log("createCustomer = ",e),e))).catch((e=>console.error(e)))},this.updateCustomer=(e,t,n)=>x(this,void 0,void 0,(function*(){const i=t.id,s=t.version?t.version:1;console.log("получаем это = ",t),console.log(n);const r={version:s,actions:n},o={method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify(r)};return fetch(`${this.apiUrl}/${this.projectKey}/customers/${i}`,o).then((e=>e.json())).then((e=>e)).catch((e=>console.error(e)))})),this.bathUrl="europe-west1.gcp.commercetools.com",this.authUrl=`https://auth.${this.bathUrl}`,this.apiUrl=`https://api.${this.bathUrl}`,this.projectKey="611a116e-87f8-43a5-9c07-959851c6dff3",this.secret="wiWXgK9Z2y_K8rx0FYLg1N-r",this.scope="i9z0351m49c9fr3YGHU_CsVHk9Eh0hyP"}checkEmailbyAPI(e){return x(this,void 0,void 0,(function*(){return new Promise((t=>{this.clientCredentialsFlow().then((n=>x(this,void 0,void 0,(function*(){const i=yield this.getAllCustomers(n.access_token);console.log("allCustomers = ",i),console.log("email = ",e),i.results.filter((t=>t.email===e)).length>0?t(!1):t(!0)}))))}))}))}},L=class{constructor(e,t){this.container=document.createElement(e),this.container.className=t}render(){return this.container}showNotification(e,t=!1){const n=document.createElement("div");n.className=t?"notificationTop":"notification",n.textContent=e,document.body.appendChild(n),setTimeout((function(){n.style.display="none"}),5e3)}},I=class extends L{constructor(e,t,n="text",i="",s="",r=!1){super(e,t),this.container.id=i,this.container instanceof HTMLInputElement&&(this.container.placeholder=s,this.container.type=n,this.container.required=r,this.container.autocomplete="true")}render(){return this.container}getType(){return this.container instanceof HTMLInputElement?this.container.type:""}getValue(){return this.container instanceof HTMLInputElement?this.container.value:""}setType(e){this.container instanceof HTMLInputElement&&(this.container.type=e)}},k=class extends L{constructor(e,t,n="",i="",s=""){super(e,t),this.container.id=i,this.container.setAttribute("for",n),this.container.innerHTML=s}render(){return this.container}},T=class extends L{constructor(e,t,n="",i=!1){super(e,t),this.container.id=n,this.container instanceof HTMLSelectElement&&(this.container.required=i,this.container.autocomplete="true")}render(){return this.container}getValue(){return this.container instanceof HTMLSelectElement?this.container.value:""}addOptions(...e){const t=document.createElement("option");t.setAttribute("selected",""),t.setAttribute("disabled",""),t.textContent="Country",this.container.append(t);for(const t of e){const e=document.createElement("option");e.value=t,e.textContent=t,this.container.append(e)}}},E=class extends L{constructor(e,t,n="",i=!0){super(e,t),this.container.id=n,this.container instanceof HTMLInputElement&&(this.container.type="checkbox",this.container.checked=i,this.container.autocomplete="true")}render(){return this.container}isChecked(){return!!(this.container instanceof HTMLInputElement&&this.container.checked)||""}};var C=function(e,t,n,i){return new(n||(n=Promise))((function(s,r){function o(e){try{c(i.next(e))}catch(e){r(e)}}function a(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((i=i.apply(e,t||[])).next())}))};const P='<svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\nwidth="15px" height="15px" viewBox="0 0 32 32" style="enable-background:new 0 0 32 32;" xml:space="preserve">\n<g id="Eye">\n <g>\n   <path d="M16,8C7.028,8,0,11.515,0,16c0,4.486,7.028,8,16,8c8.973,0,16-3.514,16-8C32,11.515,24.973,8,16,8z M2,16\n     c0-2.099,3.151-4.372,8.129-5.415C8.812,12.012,8,13.91,8,16s0.812,3.988,2.129,5.415C5.151,20.372,2,18.1,2,16z M16,22\n     c-3.309,0-6-2.691-6-6c0-3.309,2.691-6,6-6c3.309,0,6,2.691,6,6C22,19.309,19.309,22,16,22z M21.871,21.415\n     C23.188,19.988,24,18.09,24,16s-0.812-3.988-2.129-5.415C26.85,11.628,30,13.901,30,16C30,18.1,26.85,20.372,21.871,21.415z\n      M16,13c-1.654,0-3,1.346-3,3c0,1.654,1.346,3,3,3c1.654,0,3-1.346,3-3C19,14.346,17.654,13,16,13z M16,17c-0.552,0-1-0.448-1-1\n     c0-0.551,0.448-1,1-1s1,0.449,1,1C17,16.552,16.552,17,16,17z"/>\n </g>\n</g>\n</svg>',V=class extends L{constructor(e,t){super(e,t),this.api=new v,this.inputLogin=new I("input","form__input","email","login__input","",!0),this.inputPassword=new I("input","form__input","password","password__input","",!0),this.nameInput=new I("input","form__input","text","name__input","",!0),this.lastNameInput=new I("input","form__input","text","last-name__input","",!0),this.birthInput=new I("input","form__input","date","birth-date__input","dd/mm/yyyy",!0),this.streetInput=new I("input","form__input","text","street__input","",!0),this.cityInput=new I("input","form__input","text","city__input","",!0),this.postalInput=new I("input","form__input","text","postal__input","",!0),this.countrySelect=new T("select","form__input","country__select",!0),this.billStreetInput=new I("input","form__input","text","bill-street__input","",!0),this.billCityInput=new I("input","form__input","text","bill-city__input","",!0),this.billPostalInput=new I("input","form__input","text","bill-postal__input","",!0),this.shipToggle=new E("input","form__toggle","ship__toggle",!0),this.billToggle=new E("input","form__toggle","bill__toggle",!0),this.sameToggle=new E("input","form__toggle","same__toggle",!0),this.swithVisibilityPassword=document.createElement("button"),this.swithVisibilityPassword.type="button",this.swithVisibilityPassword.classList.add("switch-visibility__btn"),this.swithVisibilityPassword.innerHTML=P,this.swithVisibilityPassword.addEventListener("click",(e=>{e.preventDefault(),"password"===this.inputPassword.getType()?(this.inputPassword.setType("text"),this.swithVisibilityPassword.innerHTML='<svg width="15px" height="15px" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;" version="1.1" viewBox="0 0 32 32" width="100%" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:serif="http://www.serif.com/" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M5.992,18.611l-2.679,2.682c-0.39,0.391 -0.39,1.024 0,1.414c0.391,0.391 1.025,0.39 1.415,-0l3.027,-3.031c2.098,1.149 4.577,2.094 7.249,2.288l0.016,4.04c0.002,0.552 0.452,0.998 1.004,0.996c0.552,-0.002 0.998,-0.452 0.996,-1.004l-0.016,-4.033c2.281,-0.166 4.421,-0.88 6.302,-1.8c0.002,0.002 0.004,0.004 0.007,0.006l3.533,3.538c0.391,0.39 1.024,0.391 1.415,0c0.39,-0.39 0.39,-1.023 0,-1.414l-3.126,-3.13c3.415,-2.063 5.61,-4.496 5.61,-4.496c0.368,-0.411 0.333,-1.043 -0.078,-1.412c-0.411,-0.368 -1.043,-0.333 -1.412,0.078c0,-0 -5.93,6.667 -13.255,6.667c-7.325,0 -13.255,-6.667 -13.255,-6.667c-0.369,-0.411 -1.001,-0.446 -1.412,-0.078c-0.411,0.369 -0.446,1.001 -0.078,1.412c0,0 1.826,2.024 4.737,3.944Z"/></svg>'):(this.inputPassword.setType("password"),this.swithVisibilityPassword.innerHTML=P)})),this.submitBtn=document.createElement("button"),this.regBtn=document.createElement("button"),this.valid=!0}generateLoginForm(){const e=this.container;e.classList.add("login__form");const t=document.createElement("div");t.classList.add("form__field");const n=document.createElement("div");n.classList.add("form__field");const i=new k("label","form__label","login__input","","E-mail"),s=document.createElement("p");s.classList.add("validity__block");const r=new k("label","form__label","password__input","","Password"),o=document.createElement("p");o.classList.add("validity__block"),t.append(i.render(),this.inputLogin.render(),s),n.append(r.render(),this.inputPassword.render(),this.swithVisibilityPassword,o),this.inputLogin.render().addEventListener("input",(()=>{this.checkValidyInput(this.inputLogin.render(),s)})),this.inputPassword.render().addEventListener("input",(()=>{this.checkValidyInput(this.inputPassword.render(),o)})),this.submitBtn.classList.add("form__button"),this.submitBtn.id="login",this.submitBtn.type="submit",this.submitBtn.innerHTML="Log in",e.append(t,n,this.submitBtn),this.submitBtn.addEventListener("click",(e=>{e.preventDefault(),this.inputLogin.render()instanceof HTMLInputElement&&this.checkValidyInput(this.inputLogin.render(),i.render())&&this.checkValidyInput(this.inputPassword.render(),r.render())&&this.requestApiLogin(this.inputLogin.getValue(),this.inputPassword.getValue())})),e.append(t,n,this.submitBtn)}generateRegistrationForm(){const e=this.container;e.classList.add("reg__form");const t=document.createElement("div");t.classList.add("form__field","name__field");const n=document.createElement("div");n.classList.add("form__field","last-name__field");const i=document.createElement("div");i.classList.add("form__field","email__field");const s=document.createElement("div");s.classList.add("form__field","password__field");const r=document.createElement("div");r.classList.add("form__field","birth__field");const o=document.createElement("div");o.classList.add("form__field","street__field");const a=document.createElement("div");a.classList.add("form__field","postal__field");const c=document.createElement("div");c.classList.add("form__field","city__field");const l=document.createElement("div");l.classList.add("form__field","country__field");const d=document.createElement("div");d.classList.add("form__field","bill-street__field","hidden");const p=document.createElement("div");p.classList.add("form__field","bill-postal__field","hidden");const u=document.createElement("div");u.classList.add("form__field","bill-city__field","hidden");const h=new k("label","form__label","name__input","","First Name"),m=document.createElement("p");m.classList.add("validity__block");const g=new k("label","form__label","last-name__input","","Last Name"),f=document.createElement("p");f.classList.add("validity__block");const _=new k("label","form__label","mail__input","","E-mail"),b=document.createElement("p");b.classList.add("validity__block");const w=new k("label","form__label","password__input","","Password"),y=document.createElement("p");y.classList.add("validity__block");const x=new k("label","form__label","birth-date__input","","Birthdate"),v=document.createElement("p");v.classList.add("validity__block");const L=new k("label","form__label","street__input","","Street address and number"),I=document.createElement("p");I.classList.add("validity__block");const T=new k("label","form__label","city__input","","City"),E=document.createElement("p");E.classList.add("validity__block");const P=new k("label","form__label","postal__input","","Postal code"),V=document.createElement("p");V.classList.add("validity__block"),this.countrySelect.addOptions("Poland","Belarus","Lithuania");const S=new k("label","form__label","country__input","","Country"),M=document.createElement("p");M.classList.add("validity__block");const A=new k("label","form__label","bill-street__input","","Street address and number"),B=document.createElement("p");B.classList.add("validity__block");const j=new k("label","form__label","bill-city__input","","City"),$=document.createElement("p");$.classList.add("validity__block");const N=new k("label","form__label","bill-postal__input","","Postal code"),O=document.createElement("p");O.classList.add("validity__block");const H=document.createElement("label");H.classList.add("toggle__label"),H.setAttribute("for","ship__toggle"),H.textContent="Set as a default address";const z=document.createElement("label");z.classList.add("toggle__label","hidden"),z.setAttribute("for","bill__toggle"),z.textContent="Set as a default address";const Z=document.createElement("label");Z.classList.add("toggle__label"),Z.setAttribute("for","same__toggle"),Z.textContent="Use as a billing address",this.regBtn.classList.add("form__button"),this.regBtn.id="login",this.regBtn.type="submit",this.regBtn.innerHTML="Register";const F=document.createElement("h3");F.classList.add("field-group__header"),F.textContent="Personal";const U=document.createElement("h3");U.classList.add("field-group__header"),U.textContent="Shipping address";const D=document.createElement("h3");D.classList.add("field-group__header"),D.textContent="Credentials";const R=document.createElement("h3");R.classList.add("field-group__header","hidden"),R.textContent="Billing address",this.inputLogin.render().addEventListener("input",(()=>{this.checkValidyInput(this.inputLogin.render(),b)})),this.inputPassword.render().addEventListener("input",(()=>{this.checkValidyInput(this.inputPassword.render(),y)})),this.nameInput.render().addEventListener("input",(()=>{this.checkValidyInput(this.nameInput.render(),m)})),this.lastNameInput.render().addEventListener("input",(()=>{this.checkValidyInput(this.lastNameInput.render(),f)})),this.birthInput.render().addEventListener("input",(()=>{this.checkValidyInput(this.birthInput.render(),v)})),this.streetInput.render().addEventListener("input",(()=>{this.checkValidyInput(this.streetInput.render(),I)})),this.cityInput.render().addEventListener("input",(()=>{this.checkValidyInput(this.cityInput.render(),E)})),this.postalInput.render().addEventListener("input",(()=>{this.checkValidyInput(this.postalInput.render(),V)})),this.countrySelect.render().addEventListener("change",(()=>{this.checkValidyInput(this.postalInput.render(),V),this.checkValiditySelect(this.countrySelect.render(),M)})),this.billStreetInput.render().addEventListener("input",(()=>{this.checkValidyInput(this.billStreetInput.render(),B)})),this.billCityInput.render().addEventListener("input",(()=>{this.checkValidyInput(this.billCityInput.render(),$)})),this.billPostalInput.render().addEventListener("input",(()=>{this.checkValidyInput(this.billPostalInput.render(),O)})),this.sameToggle.render().addEventListener("input",(()=>{this.sameToggle.isChecked()?(R.classList.add("hidden"),d.classList.add("hidden"),u.classList.add("hidden"),p.classList.add("hidden"),z.classList.add("hidden")):(R.classList.remove("hidden"),d.classList.remove("hidden"),u.classList.remove("hidden"),p.classList.remove("hidden"),z.classList.remove("hidden"))})),this.regBtn.addEventListener("click",(e=>C(this,void 0,void 0,(function*(){if(e.preventDefault(),console.log("Click reg Btn... "),this.checkValidyInput(this.inputLogin.render(),b),this.checkValidyInput(this.inputPassword.render(),y),this.checkValidyInput(this.nameInput.render(),m),this.checkValidyInput(this.lastNameInput.render(),f),this.checkValidyInput(this.birthInput.render(),v),this.checkValidyInput(this.streetInput.render(),I),this.checkValidyInput(this.cityInput.render(),E),this.checkValidyInput(this.postalInput.render(),V),this.checkValiditySelect(this.countrySelect.render(),M),this.checkValidyInput(this.billStreetInput.render(),B),this.checkValidyInput(this.billCityInput.render(),$),this.checkValidyInput(this.billPostalInput.render(),O),this.checkValidyInput(this.inputLogin.render(),b)&&this.checkValidyInput(this.inputPassword.render(),y)&&this.checkValidyInput(this.nameInput.render(),m)&&this.checkValidyInput(this.lastNameInput.render(),f)&&this.checkValidyInput(this.birthInput.render(),v)&&this.checkValidyInput(this.streetInput.render(),I)&&this.checkValidyInput(this.cityInput.render(),E)&&this.checkValidyInput(this.postalInput.render(),V)&&this.checkValiditySelect(this.countrySelect.render(),M)){console.log("We can add new user but we need to check on Server"),console.log("email= ",this.inputLogin.render().value);const e=this.inputLogin.render().value;this.api.checkEmailbyAPI(e).then((t=>{if(console.log("email= ",e),console.log("response = ",t),t){const e=this.inputLogin.render().value,t=this.inputPassword.render().value,n={email:e,firstName:this.nameInput.render().value,lastName:this.lastNameInput.render().value,password:t};this.api.clientCredentialsFlow().then((i=>{console.log("response = ",i),this.api.createCustomer(i.access_token,n).then((n=>C(this,void 0,void 0,(function*(){const s=function(e){switch(e){case"Poland":default:return"PL";case"Belarus":return"BY";case"Lithuania":return"LT"}}(this.countrySelect.render().value);if(console.log("userInfo = ",n),n.customer.id){const e=[{action:"addAddress",address:{streetName:this.streetInput.render().value,postalCode:this.postalInput.render().value,city:this.cityInput.render().value,country:s}}],t=yield this.api.updateCustomer(i.access_token,n.customer,e);n.customer.version++,console.log("answer1 = ",t);const r=Object.assign({},t).addresses.pop().id;console.log("shippingAddressId= ",r);const o=[{action:"setDateOfBirth",dateOfBirth:this.birthInput.render().value}],a=yield this.api.updateCustomer(i.access_token,n.customer,o);n.customer.version++,console.log("answer2 = ",a);const c=[{action:"addShippingAddressId",addressId:r}],l=yield this.api.updateCustomer(i.access_token,n.customer,c);if(n.customer.version++,console.log("answer3 = ",l),this.shipToggle.isChecked()){const e=[{action:"setDefaultShippingAddress",addressId:r}],t=yield this.api.updateCustomer(i.access_token,n.customer,e);n.customer.version++,console.log("answer4 = ",t)}if(this.sameToggle.isChecked()){const e=[{action:"addBillingAddressId",addressId:r}],t=yield this.api.updateCustomer(i.access_token,n.customer,e);if(n.customer.version++,console.log("answer5_1 = ",t),this.shipToggle.isChecked()){const e=[{action:"setDefaultBillingAddress",addressId:r}],t=yield this.api.updateCustomer(i.access_token,n.customer,e);n.customer.version++,console.log("answer5_2 = ",t)}}else{const e=[{action:"addAddress",address:{streetName:this.billStreetInput.render().value,postalCode:this.billPostalInput.render().value,city:this.billCityInput.render().value,country:s}}],t=yield this.api.updateCustomer(i.access_token,n.customer,e);n.customer.version++,console.log("answer6 = ",t);const r=Object.assign({},t).addresses.pop().id;console.log("billingAddressId = ",r);const o=[{action:"addBillingAddressId",addressId:r}],a=yield this.api.updateCustomer(i.access_token,n.customer,o);if(n.customer.version++,console.log("answer7 = ",a),this.billToggle.isChecked()){const e=[{action:"setDefaultBillingAddress",addressId:r}],t=yield this.api.updateCustomer(i.access_token,n.customer,e);n.customer.version++,console.log("answer8 = ",t)}}}this.showNotification("Вы успешно зарегистрировались и вошли в систему."),console.log("sucsess reg"),console.log("logining ...)"),this.requestApiLogin(e,t)}))))}))}else this.showNotification(`We already have user with this login = ${e}`)}))}})))),t.append(h.render(),this.nameInput.render(),m),n.append(g.render(),this.lastNameInput.render(),f),r.append(x.render(),this.birthInput.render(),v),o.append(L.render(),this.streetInput.render(),I),l.append(S.render(),this.countrySelect.render(),M),c.append(T.render(),this.cityInput.render(),E),a.append(P.render(),this.postalInput.render(),V),H.prepend(this.shipToggle.render()),Z.prepend(this.sameToggle.render()),d.append(A.render(),this.billStreetInput.render(),B),u.append(j.render(),this.billCityInput.render(),$),p.append(N.render(),this.billPostalInput.render(),O),z.prepend(this.billToggle.render()),i.append(_.render(),this.inputLogin.render(),b),s.append(w.render(),this.inputPassword.render(),this.swithVisibilityPassword,y),e.append(F,t,n,r,U,o,l,c,a,H,Z,R,d,u,p,z,D,i,s,this.regBtn)}render(){return this.container}checkValidy(){return this.container instanceof HTMLFormElement&&this.container.checkValidity()}checkValidyInput(e,t){if(e instanceof HTMLInputElement){if(""===e.value)return t.innerText="Required field",t.classList.add("wrong__input"),!1;if("email"===e.type)return function(e,t){const n=e.value.indexOf(".");return e.value.includes("@")?e.value.includes(" ")?(t.innerText="E-mail can't contain spaces",t.classList.add("wrong__input"),!1):e.value.indexOf("@")===e.value.length-1||-1===n||n<e.value.indexOf("@")||n===e.value.length-1?(t.innerText="E-mail must have domain",t.classList.add("wrong__input"),!1):(t.classList.remove("wrong__input"),t.innerText="",!0):(t.innerText='E-mail must contain "@"',t.classList.add("wrong__input"),!1)}(e,t);if("password"===e.type||"password__input"===e.id)return function(e,t){const n=e.value;return n.length<8?(t.innerText="Password must be 8+ characters",t.classList.add("wrong__input"),!1):n.includes(" ")?(t.innerText="Password can't contain spaces",t.classList.add("wrong__input"),!1):/[A-Z]/.test(n)?/[a-z]/.test(n)?/\d/.test(n)?/[!@#$%^&*]/.test(n)?(t.classList.remove("wrong__input"),t.innerText="",!0):(t.innerText="Password must contain at least one special character (e.g., !@#$%^&*)",t.classList.add("wrong__input"),!1):(t.innerText="Password must contain at least one digit (0-9)",t.classList.add("wrong__input"),!1):(t.innerText="Password must contain at least one lowercase letter (a-z)",t.classList.add("wrong__input"),!1):(t.innerText="Password must contain at least one uppercase letter (A-Z)",t.classList.add("wrong__input"),!1)}(e,t);if("name__input"===e.id||"last-name__input"===e.id||"city__input"===e.id||"bill-city__input"===e.id)return this.checkValidityInputName(e,t);if("date"===e.type||"birth-date__input"===e.id)return this.checkValidityInputBirthDate(e,t);if("street__input"===e.id||"bill-street__input"===e.id)return this.checkValidityInputStreet(e,t);if("postal__input"===e.id||"bill-postal__input"===e.id)return this.checkValidityInputPostalCode(e,t)}return t.classList.remove("wrong__input"),t.innerText="",!0}checkValiditySelect(e,t){return e instanceof HTMLSelectElement&&"Country"===e.value?(t.innerText="Required field",t.classList.add("wrong__input"),!1):(t.classList.remove("wrong__input"),t.innerText="",!0)}checkValidityInputName(e,t){const n=e.value;return/^\s*$/.test(n)?(t.innerText="The field must contain at least one character",t.classList.add("wrong__input"),!1):/[-!$%^&*()_+|~=`{}[\]:/;<>?,.@#]/.test(n)?(t.innerText="The field must not contain special characters",t.classList.add("wrong__input"),!1):/\d/.test(n)?(t.innerText="The field must not contain digits (0-9)",t.classList.add("wrong__input"),!1):(t.classList.remove("wrong__input"),t.innerText="",!0)}checkValidityInputBirthDate(e,t){const n=new Date(e.value.replace(/(..)\/(..)\/(....)/,"$3-$2-$1")),i=new Date;return i.setFullYear(i.getFullYear()-13),n>=i?(t.innerText="You should be at least 13 y.o.",t.classList.add("wrong__input"),!1):(t.classList.remove("wrong__input"),t.innerText="",!0)}checkValidityInputStreet(e,t){const n=e.value;return/^\s*$/.test(n)?(t.innerText="The field must contain at least one character",t.classList.add("wrong__input"),!1):(t.classList.remove("wrong__input"),t.innerText="",!0)}checkValidityInputPostalCode(e,t){const n=e.value,i=this.countrySelect.getValue();return"Belarus"!==i||/^2\d{5}$/.test(n)?"Poland"!==i||/^\d{2}-\d{3}$/.test(n)?"Lithuania"!==i||/^(LT-)?\d{5}$/.test(n)?(t.classList.remove("wrong__input"),t.innerText="",!0):(t.innerText="Invalid postal code format for Lithuania",t.classList.add("wrong__input"),!1):(t.innerText="Invalid postal code format for Poland",t.classList.add("wrong__input"),!1):(t.innerText="Invalid postal code format for Belarus",t.classList.add("wrong__input"),!1)}requestApiLogin(e,t){return C(this,void 0,void 0,(function*(){try{const n=yield this.api.passwordFlow(e,t);if(console.log(e,t,"datalog==",n),"object"==typeof n&&null!==n&&"statusCode"in n){const e=n.statusCode;console.log("Неверный логин или пароль",e),this.showNotification("Неверный логин или пароль. Просьба проверить данные.")}if("object"==typeof n&&null!==n&&"access_token"in n){const e="string"==typeof n.access_token?n.access_token:"";localStorage.setItem("token",e),localStorage.setItem("userData",JSON.stringify(n)),this.showNotification("Вы успешно вошли.",!0),console.log("sucsess"),window.location.hash="main-page"}}catch(e){this.showNotification("Произошла ошибка, попробуйте еще раз."),console.error("Произошла ошибка, попробуйте еще раз",e)}}))}};class S extends f{constructor(e){super(e)}render(){const e=this.createHeaderTitle(S.TextObject.MainTitle),t=new V("form","form__container");t.generateLoginForm();const n=document.createElement("a");return n.classList.add("go-to-registration--link"),n.href="#registration-page",n.innerText="Not registered? let's do it now!",this.container.append(e),this.container.append(t.render()),this.container.append(n),this.container}}S.TextObject={MainTitle:"Login form"};const M=S;var A=n(49),B={};B.styleTagTransform=u(),B.setAttributes=c(),B.insert=o().bind(null,"head"),B.domAPI=s(),B.insertStyleElement=d(),t()(A.Z,B),A.Z&&A.Z.locals&&A.Z.locals;class j extends f{constructor(e){super(e)}render(){const e=this.createHeaderTitle(j.TextObject.MainTitle),t=new V("form","form__container");t.generateRegistrationForm();const n=document.createElement("a");return n.classList.add("go-to-login-link"),n.href="#login-page",n.innerText="Do you have account? let's login now!",this.container.append(e),this.container.append(t.render()),this.container.append(n),this.container}}j.TextObject={MainTitle:"Registration"};const $=j,N=[{id:"main-page",text:"Main page"},{id:"registration-page",text:"Registration"},{id:"login-page",text:"Login"},{id:"logout-page",text:"LogOut"}],O=class extends L{constructor(e,t){super(e,t)}renderPageButtons(){const e=document.createElement("div");N.forEach((t=>{if("logout-page"!==t.id){const n=document.createElement("a");n.href=`#${t.id}`,n.innerHTML=t.text,e.append(n)}})),this.container.append(e)}renderPageButtonsForLogOutMenu(){const e=document.createElement("div");N.forEach((t=>{if("main-page"===t.id||"logout-page"===t.id){const n=document.createElement("a");n.href=`#${t.id}`,n.innerHTML=t.text,"logout-page"===t.id&&(n.className="logout",n.href="#login-page"),e.append(n)}})),this.container.append(e)}render(){return this.renderPageButtons(),this.container}renderLogoutMenu(){const e=document.querySelector(".header");e&&(e.innerHTML="",this.renderPageButtonsForLogOutMenu(),this.container.firstChild&&e.append(this.container.firstChild));const t=document.querySelector(".logout");null==t||t.addEventListener("click",(()=>{localStorage.clear(),this.renderDefaultMenu()}))}renderDefaultMenu(){const e=document.querySelector(".header");e&&(e.innerHTML="",this.renderPageButtons(),this.container.firstChild&&e.append(this.container.firstChild))}};var H,z=n(218),Z={};Z.styleTagTransform=u(),Z.setAttributes=c(),Z.insert=o().bind(null,"head"),Z.domAPI=s(),Z.insertStyleElement=d(),t()(z.Z,Z),z.Z&&z.Z.locals&&z.Z.locals,function(e){e[e.Error_404=404]="Error_404"}(H||(H={}));class F extends f{constructor(e,t){super(e),this.errorType=t}render(){const e=this.createHeaderTitle(F.TextObject[this.errorType]);this.container.append(e);const t=document.createElement("div");t.className="comeBackContainer";const n=document.createElement("a");return n.href="/#main-page",n.innerText="Lets start from the main page!",t.append(n),this.container.append(t),this.container}}F.TextObject={404:"Error! We can not find this page"};const U=F;class D{constructor(){this.mainPage=new b("Main page"),this.registrationPage=new $("Registration page"),this.loginPage=new M("Login page")}}var R=n(767),q={};q.styleTagTransform=u(),q.setAttributes=c(),q.insert=o().bind(null,"head"),q.domAPI=s(),q.insertStyleElement=d(),t()(R.Z,q),R.Z&&R.Z.locals&&R.Z.locals,(new class{constructor(){this.testCustomer={email:"aaaa@example.com",firstName:"John",lastName:"Doe2",password:"Secret%123"},this.controller=new class{constructor(){this.defaultPageId="current-page",this.container=document.body,this.initialPage=new b("main-page"),this.header=new O("header","header")}renderHeader(){this.container.append(this.header.render())}renderPageContent(e){const t=document.querySelector(`#${this.defaultPageId}`);t&&t.remove();let n=null;if(console.log("idPage = ",e),"main-page"===e||""===e?n=new b(e):"registration-page"===e?localStorage.getItem("token")?window.location.hash="main-page":n=new $(e):"login-page"===e?localStorage.getItem("token")?window.location.hash="main-page":n=new M(e):n="logout-page"===e?new b("main-page"):new U(e,H.Error_404),n){const t=n.render();t.id=this.defaultPageId,t.classList.add(e),this.container.append(t)}localStorage.getItem("token")?this.header.renderLogoutMenu():this.header.renderDefaultMenu()}},this.API=new v,this.view=new D,this.container=document.body}enableRouteChange(){window.addEventListener("hashchange",(()=>{console.log("hashchange");const e=window.location.hash.slice(1);this.controller.renderPageContent(e)}))}start(){console.log("Start eCommerce-Application..."),this.enableRouteChange(),this.controller.renderHeader(),this.controller.renderPageContent(`${window.location.hash.slice(1).length>0?window.location.hash.slice(1):"main-page"}`),this.controller.header.renderDefaultMenu()}testAPI(){console.log("Test API..."),this.API.clientCredentialsFlow().then((e=>{console.log("response = ",e)}))}}).start()})()})();